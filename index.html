<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lời chúc 20/10</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>
    <style>
        /* --- Cài đặt chung & Hiệu ứng nền --- */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            height: 100vh;
            overflow: hidden;
            background-color: #fde2e4;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            cursor: url('image/cursor.png'), auto;
        }
        .falling-heart {
            position: absolute;
            top: -10%;
            animation: fall linear forwards;
            pointer-events: none;
            width: 25px;
            height: auto;
        }
        @keyframes fall {
            to {
                transform: translateY(105vh) rotate(360deg);
                opacity: 0;
            }
        }
        
        /* --- Màn hình chính với icon lá thư --- */
        #main-page {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100%;
        }
        #letter-icon {
            width: 150px;
            cursor: pointer;
            transition: transform 0.3s ease;
            animation: pulse 2s infinite;
        }
        #letter-icon:hover {
            transform: scale(1.1);
        }
        #main-page p {
            margin-top: 20px;
            font-size: 24px;
            color: #d6336c;
            font-weight: bold;
        }
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        /* --- Cửa sổ lá thư (Pop-up) --- */
        .wrapperLetterForm {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: 1000;
            background: rgba(0, 0, 0, 0.7);
            display: none;
            justify-content: center;
            align-items: center;
        }
        .boxLetter {
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .formLetter {
            position: relative;
            width: 800px;
            height: 500px;
            background-color: #fff0f3;
            border-radius: 20px;
            z-index: 100;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            border: 2px solid #ff8fab;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        .wrapperLetter {
            position: relative;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        .fa-xmark {
            position: absolute;
            right: 20px;
            top: 20px;
            color: #d6336c;
            cursor: pointer;
            font-size: 30px;
            z-index: 110;
        }
        
        /* --- Nội dung và trang trí trong thư --- */
        .textLetter {
            text-align: center;
            color: #590d22;
            z-index: 5;
        }
        .textLetter h2 {
            font-size: 32px;
            color: #c9184a;
            margin-bottom: 15px;
        }
        .textLetter .contentLetter {
            font-size: 20px;
            max-width: 600px;
            line-height: 1.6;
            margin-bottom: 20px;
        }

        /* --- THAY ĐỔI Ở ĐÂY --- */
        #giftbox-img {
            width: 150px; /* Đã chỉnh kích thước nhỏ lại */
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 1;
        }
        
        .mewmew-gif {
            position: absolute;
            bottom: 0;
            width: 100px;
            z-index: 6;
        }
        #mewmew1 { left: 10px; }
        #mewmew2 { right: 10px; transform: scaleX(-1); }

        /* --- Hiệu ứng mèo thò tay --- */
        .cat-paw {
            position: absolute;
            bottom: -200px;
            width: 150px;
            z-index: 120;
            animation: peek-a-boo 3s ease-in-out 1s forwards;
        }
        .cat-paw img { width: 100%; }
        .cat-paw.left { left: 5%; transform: rotate(-20deg); }
        .cat-paw.right { right: 5%; transform: rotate(20deg) scaleX(-1); }
        @keyframes peek-a-boo {
            0% { bottom: -200px; }
            50% { bottom: -20px; }
            70% { bottom: -40px; }
            100% { bottom: -30px; }
        }

    </style>
</head>
<body>

    <div id="main-page">
        <img src="image/letters.png" alt="Mở thư" id="letter-icon">
        <p>Click vào để mở thư!</p>
    </div>

    <div class="wrapperLetterForm">
        <i class="fa-solid fa-xmark"></i>
        
        <div class="boxLetter">
            <div class="formLetter">
                <div class="wrapperLetter">
                    <div class="textLetter">
                        <h2></h2>
                        <p class="contentLetter"></p>
                    </div>

                    <img src="image/qua.png" alt="Hộp quà" id="giftbox-img">
                    
                    <img src="image/mewmew.gif" alt="Cat" class="mewmew-gif" id="mewmew1">
                    <img src="image/mewmew.gif" alt="Cat" class="mewmew-gif" id="mewmew2">
                </div>
            </div>
        </div>

        <div class="cat-paw left">
            <img src="image/handsCat.png" alt="Cat Paw">
        </div>
        <div class="cat-paw right">
            <img src="image/handsCat.png" alt="Cat Paw">
        </div>
    </div>

    <script>
        $(document).ready(function () {
            // --- Hiệu ứng mưa trái tim ---
            setInterval(() => {
                const heart = document.createElement('img');
                heart.src = 'image/heart.png';
                heart.classList.add('falling-heart');
                heart.style.left = Math.random() * 100 + 'vw';
                heart.style.animationDuration = Math.random() * 3 + 4 + 's';
                document.body.appendChild(heart);
                
                setTimeout(() => {
                    heart.remove();
                }, 7000);
            }, 300);

            // --- Mở và đóng thư ---
            $('#letter-icon').click(function () {
                $(".wrapperLetterForm").fadeIn();
                funcTimeoutLetter();
            });

            $('.fa-xmark').click(function () {
                $('.wrapperLetterForm').fadeOut();
            });

            // --- Hiệu ứng gõ chữ (giữ nguyên) ---
            let indexText = 0;
            let textLetter = document.querySelector('.textLetter h2');
            const textLetterH2 = "Gửi bạn nhỏ Lưu Đào Thị Thanh Xuân!";
            let timoutTextLetter;

            function textCharLetter() {
                if (indexText < textLetterH2.length) {
                    textLetter.textContent += textLetterH2[indexText];
                    indexText++;
                    setTimeout(textCharLetter, 100);
                } else {
                    setTimeout(funcTimeoutLetterContent, 500);
                }
            }

            function funcTimeoutLetter() {
                indexText = 0;
                textLetter.textContent = '';
                clearTimeout(timoutTextLetter);
                textCharLetter();
            }

            let indexTextContent = 0;
            let textLetterContent = document.querySelector('.contentLetter');
            const textLetterP = "Hôm nay là ngày 20/10 anh chúc em luôn hạnh phúc và gặp nhiều may mắn trong chặng đường sắp tới ạ. Hãy luôn giữ mãi nụ cười trên môi nhá và mong em đạt được những thứ em mong muốn nha";
            let timoutTextLetterContent;

            function textCharLetterContent() {
                if (indexTextContent < textLetterP.length) {
                    textLetterContent.textContent += textLetterP[indexTextContent];
                    indexTextContent++;
                    setTimeout(textCharLetterContent, 70);
                } else {
                    clearTimeout(timoutTextLetterContent);
                }
            }

            function funcTimeoutLetterContent() {
                indexTextContent = 0;
                textLetterContent.textContent = '';
                clearTimeout(timoutTextLetterContent);
                textCharLetterContent();
            }
        });
    </script>
</body>
</html>
